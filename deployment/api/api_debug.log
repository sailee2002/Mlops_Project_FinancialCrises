/Users/parthsaraykar/Desktop/Mlops_Project_FinancialCrises/deployment/api/main.py:53: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [18102]
INFO:     Waiting for application startup.
2025-12-08 15:43:36,316 - main - INFO - ================================================================================
2025-12-08 15:43:36,316 - main - INFO - üöÄ STARTING FINANCIAL STRESS TEST API
2025-12-08 15:43:36,316 - main - INFO - ================================================================================
2025-12-08 15:43:39,398 - main - INFO - ‚ÑπÔ∏è  PyTorch 2.0.1 initialized
2025-12-08 15:43:39,398 - main - INFO - ‚ÑπÔ∏è  Set PyTorch to single-threaded mode
2025-12-08 15:43:39,399 - main - INFO - 
üì• Loading models from GCS (this may take 60 seconds)...
/Users/parthsaraykar/Desktop/Mlops_Project_FinancialCrises/venv_deployment/lib/python3.11/site-packages/google/auth/_default.py:108: UserWarning: Your application has authenticated using end user credentials from Google Cloud SDK without a quota project. You might receive a "quota exceeded" or "API not enabled" error. See the following page for troubleshooting: https://cloud.google.com/docs/authentication/adc-troubleshooting/user-creds. 
  warnings.warn(_CLOUD_SDK_CREDENTIALS_WARNING)
2025-12-08 15:43:40,769 - model_loader - INFO - ================================================================================
2025-12-08 15:43:40,769 - model_loader - INFO - üöÄ LOADING ALL MODELS FROM GCS
2025-12-08 15:43:40,769 - model_loader - INFO - ================================================================================
2025-12-08 15:43:40,770 - model_loader - INFO - 
‚è≥ Loading Model 1...
2025-12-08 15:43:40,770 - model_loader - INFO - üì• Loading Model 1: VAE Scenario Generator
2025-12-08 15:43:41,330 - model_loader - INFO -    ‚úì Downloaded: models/vae/deployment/best_model_deployment.pkl
2025-12-08 15:43:43,336 - model_loader - INFO -    ‚úì Loaded VAE dict with keys: ['model_state_dict', 'scaler', 'features', 'config', 'generation_params', 'metrics', 'metadata']
2025-12-08 15:43:43,336 - model_loader - INFO -    ‚úì Extracted scaler for 72 features
2025-12-08 15:43:43,336 - model_loader - INFO -    ‚úì Latent dim: 32
2025-12-08 15:43:44,341 - model_loader - INFO - ‚úÖ Model 1 loaded and stabilized
2025-12-08 15:43:44,341 - model_loader - INFO - 
‚è≥ Loading Model 2...
2025-12-08 15:43:44,341 - model_loader - INFO - üì• Loading Model 2: Predictive Models (5 targets)
2025-12-08 15:43:44,753 - model_loader - INFO -    ‚úì Downloaded: models/predictor/revenue_best.pkl
2025-12-08 15:43:45,234 - model_loader - INFO -    ‚úì Found 229 feature names
2025-12-08 15:43:45,234 - model_loader - INFO -    ‚úì Loaded revenue model (from dict)
2025-12-08 15:43:45,851 - model_loader - INFO -    ‚úì Downloaded: models/predictor/eps_best.pkl
2025-12-08 15:43:45,877 - model_loader - INFO -    ‚úì Loaded eps model (from dict)
2025-12-08 15:43:46,283 - model_loader - INFO -    ‚úì Downloaded: models/predictor/debt_equity_best.pkl
2025-12-08 15:43:46,295 - model_loader - INFO -    ‚úì Loaded debt_equity model (from dict)
2025-12-08 15:43:46,579 - model_loader - INFO -    ‚úì Downloaded: models/predictor/profit_margin_best.pkl
2025-12-08 15:43:46,587 - model_loader - INFO -    ‚úì Loaded profit_margin model (from dict)
2025-12-08 15:43:46,886 - model_loader - INFO -    ‚úì Downloaded: models/predictor/stock_return_best.pkl
2025-12-08 15:43:46,893 - model_loader - INFO -    ‚úì Loaded stock_return model (from dict)
2025-12-08 15:43:47,894 - model_loader - INFO - ‚úÖ Model 2 loaded
2025-12-08 15:43:47,895 - model_loader - INFO - 
‚è≥ Loading Model 3...
2025-12-08 15:43:47,895 - model_loader - INFO - üì• Loading Model 3: Anomaly Detection
2025-12-08 15:43:48,009 - model_loader - INFO -    ‚úì Downloaded: models/anomaly_detection/model.pkl
/Users/parthsaraykar/Desktop/Mlops_Project_FinancialCrises/venv_deployment/lib/python3.11/site-packages/sklearn/base.py:442: InconsistentVersionWarning: Trying to unpickle estimator OneClassSVM from version 1.3.2 when using version 1.7.2. This might lead to breaking code or invalid results. Use at your own risk. For more info please refer to:
https://scikit-learn.org/stable/model_persistence.html#security-maintainability-limitations
  warnings.warn(
2025-12-08 15:43:48,314 - model_loader - INFO -    ‚úì Downloaded: models/anomaly_detection/scaler.pkl
/Users/parthsaraykar/Desktop/Mlops_Project_FinancialCrises/venv_deployment/lib/python3.11/site-packages/sklearn/base.py:442: InconsistentVersionWarning: Trying to unpickle estimator StandardScaler from version 1.3.2 when using version 1.7.2. This might lead to breaking code or invalid results. Use at your own risk. For more info please refer to:
https://scikit-learn.org/stable/model_persistence.html#security-maintainability-limitations
  warnings.warn(
2025-12-08 15:43:48,315 - model_loader - INFO -    ‚úì Loaded scaler
2025-12-08 15:43:48,387 - model_loader - INFO -    ‚úì Downloaded: models/anomaly_detection/features.json
2025-12-08 15:43:48,387 - model_loader - INFO -    ‚úì Loaded model (14 features)
2025-12-08 15:43:48,387 - model_loader - INFO - ‚úÖ Model 3 loaded
2025-12-08 15:43:48,387 - model_loader - INFO - 
================================================================================
2025-12-08 15:43:48,388 - model_loader - INFO - ‚úÖ ALL MODELS LOADED SUCCESSFULLY
2025-12-08 15:43:48,388 - model_loader - INFO - ================================================================================
2025-12-08 15:43:48,388 - main - INFO - 
üìä Loading company data...
/Users/parthsaraykar/Desktop/Mlops_Project_FinancialCrises/venv_deployment/lib/python3.11/site-packages/google/auth/_default.py:108: UserWarning: Your application has authenticated using end user credentials from Google Cloud SDK without a quota project. You might receive a "quota exceeded" or "API not enabled" error. See the following page for troubleshooting: https://cloud.google.com/docs/authentication/adc-troubleshooting/user-creds. 
  warnings.warn(_CLOUD_SDK_CREDENTIALS_WARNING)
2025-12-08 15:43:49,630 - gcs_data_fetcher - INFO - üì• Loading training data from GCS...
2025-12-08 15:44:04,903 - gcs_data_fetcher - INFO -    ‚úì Loaded 4612 rows
2025-12-08 15:44:04,903 - gcs_data_fetcher - INFO - üìä Building company lookup index...
2025-12-08 15:44:05,002 - gcs_data_fetcher - INFO -    ‚úì Indexed 84 companies
2025-12-08 15:44:05,004 - main - INFO - 
üîß Initializing pipeline...
2025-12-08 15:44:05,004 - main - INFO - 
üé≤ Pre-generating scenarios...
2025-12-08 15:44:05,004 - pipeline - INFO - üé≤ Generating 10 scenarios with Model 1...
2025-12-08 15:44:05,006 - pipeline - INFO -    ‚úì Generated 10 scenarios
2025-12-08 15:44:05,006 - main - INFO - 
================================================================================
2025-12-08 15:44:05,006 - main - INFO - ‚úÖ API READY
2025-12-08 15:44:05,006 - main - INFO - ================================================================================
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-12-08 15:44:32,507 - pipeline - INFO - üî¨ Running stress test: AAPL √ó 1 scenarios
2025-12-08 15:44:32,518 - feature_mapper - INFO - ‚úì Mapped 69 macro features for Model 2
2025-12-08 15:44:32,518 - pipeline - INFO -    Model 2 expects 229 features
2025-12-08 15:44:32,528 - pipeline - INFO -    ‚úì Created 229 features in exact order
2025-12-08 15:44:32,529 - pipeline - INFO -    ‚Üí Predicting revenue...
2025-12-08 15:44:32,529 - pipeline - INFO -       Model type: <class 'lightgbm.sklearn.LGBMRegressor'>
2025-12-08 15:44:32,529 - pipeline - INFO -       Input shape: (1, 229)
2025-12-08 15:44:32,532 - pipeline - INFO -       Input dtypes: {dtype('float64'): 229}
